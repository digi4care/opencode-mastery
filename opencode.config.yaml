# OpenCode Configuration
# Single source of truth for all features, plugins, and settings.
# 
# Documentation: docs/project/config-system.md
# 
# How it works:
# 1. All plugins/tools load this config via src/lib/config
# 2. Changes here affect all components immediately
# 3. Missing fields use defaults from src/lib/config/defaults.ts

version: "1.0"

project:
  name: opencode-mastery
  description: OpenCode documentation and tooling
  version: "1.0.0"

features:
  # Memory - Persistent project memory
  memory:
    enabled: true
    lazyLoading: true
    compaction:
      enabled: true
      max_size_kb: 50
      keep_entries: 10
    types:
      episodic:
        enabled: false
        retention: 30d
      semantic:
        enabled: false
        scope: project

  # Docs - OpenCode documentation access
  docs:
    enabled: true
    context7: true           # Use Context7 API for live docs
    local_fallback: true     # Fall back to local cache when offline
    cache_ttl_days: 7        # Refresh local cache after X days
    auto_download: false     # Auto-download on first use

  # TDD - Test-Driven Development enforcement
  tdd:
    enabled: true
    enforce_on_write: true   # Check when writing files
    block_without_test: true # Prevent writes without test
    verify_red_phase: true   # Require seeing test fail
    check_git_order: false   # Verify test committed first

  # Debugging - Systematic debugging assistant
  debugging:
    enabled: true
    auto_start_on_error: true    # Auto-start debug workflow
    max_fix_attempts: 3          # Max tries before questioning architecture
    track_phases: true           # Track 4-phase progress
    require_test_before_fix: true # Require failing test first

  # Playwright - Browser automation
  playwright:
    enabled: true
    headless: false          # Show browser window
    screenshots: true        # Take screenshots on errors
    video: false             # Record video
    trace: false             # Record trace
    default_timeout: 30000   # Default timeout in ms
